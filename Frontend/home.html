<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Learn Flow Â· Projects</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", sans-serif;
}

body {
  background: #f4f6fb;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  width: 420px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
  color: #4f46e5;
}

/* ===== CARD ===== */
.card {
  background: white;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}

/* ===== INPUT ===== */
input {
  width: 100%;
  padding: 12px;
  margin-bottom: 12px;
  border-radius: 8px;
  border: 1px solid #ddd;
}

/* ===== BUTTON ===== */
button {
  padding: 8px 14px;
  background: #5b6cff;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

button:hover {
  background: #4f46e5;
}

.delete-btn {
  background: #ef4444;
}

.delete-btn:hover {
  background: #dc2626;
}

/* ===== PROJECT LIST ===== */
.project {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f8fafc;
  padding: 12px;
  border-radius: 10px;
  margin-bottom: 10px;
}

.project span {
  font-weight: 600;
}

.project small {
  color: #666;
  font-size: 12px;
}

.actions {
  display: flex;
  gap: 8px;
}
</style>
</head>

<body>

<div class="container">
  <h1>ðŸ“š Learn Flow</h1>

  <!-- CREATE PROJECT -->
  <div class="card">
    <h3>Create New Project</h3><br>
    <input type="text" id="projectName" placeholder="Project name (e.g. Biology Unit 2)">
    <button onclick="createProject()" style="width:100%">Create Project</button>
  </div>

  <!-- PROJECT LIST -->
  <div class="card">
    <h3>Your Projects</h3><br>
    <div id="projectList"></div>
  </div>
</div>

<script>
let projects = JSON.parse(localStorage.getItem("projects")) || [];
const list = document.getElementById("projectList");

/* ===============================
   RENDER PROJECTS
=============================== */
function renderProjects() {
  list.innerHTML = "";

  if (!projects.length) {
    list.innerHTML = "<p>No projects yet.</p>";
    return;
  }

  projects.forEach(p => {
    const div = document.createElement("div");
    div.className = "project";

    div.innerHTML = `
      <div>
        <span>${p.name}</span><br>
        <small>Created: ${p.createdAt}</small>
      </div>
      <div class="actions">
        <button onclick="openProject(${p.id})">Open</button>
        <button class="delete-btn" onclick="deleteProject(${p.id})">Delete</button>
      </div>
    `;

    list.appendChild(div);
  });
}

/* ===============================
   CREATE PROJECT
=============================== */
function createProject() {
  const name = document.getElementById("projectName").value.trim();
  if (!name) return alert("Enter a project name.");

  const project = {
    id: Date.now(),
    name,
    createdAt: new Date().toLocaleDateString()
  };

  projects.push(project);
  localStorage.setItem("projects", JSON.stringify(projects));
  document.getElementById("projectName").value = "";
  renderProjects();
}

/* ===============================
   OPEN PROJECT
=============================== */
function openProject(id) {
  localStorage.setItem("currentProjectId", id);
  window.location.href = "index.html";
}

/* ===============================
   DELETE PROJECT (FULL CLEANUP)
=============================== */
function deleteProject(id) {
  const project = projects.find(p => p.id === id);
  if (!project) return;

  const confirmDelete = confirm(
    `Delete project "${project.name}"?\n\nThis will remove all notes, flashcards, quizzes, and tasks.`
  );

  if (!confirmDelete) return;

  // Remove project
  projects = projects.filter(p => p.id !== id);
  localStorage.setItem("projects", JSON.stringify(projects));

  // Remove project data
  localStorage.removeItem(`flashcards_${id}`);
  localStorage.removeItem(`tasks_${id}`);
  localStorage.removeItem(`fullText_${id}`);

  // If currently open project was deleted
  if (localStorage.getItem("currentProjectId") == id) {
    localStorage.removeItem("currentProjectId");
  }

  renderProjects();
}

renderProjects();
</script>

</body>
</html>
